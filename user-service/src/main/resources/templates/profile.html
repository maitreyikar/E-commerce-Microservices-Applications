<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
</head>
<body>
    <h2>User Profile</h2>
    <p th:text="${error}"></p>
    <p th:text="${user.username}"></p>
    <form id="myForm" th:action="@{/user/profile}" th:object="${user}" method="POST">
        <input th:field="*{password}" id="password" type="password" name="newPassword" placeholder="New Password" required><br>
        <input id="confirmPassword" type="password" name="confirmNewPassword" placeholder="Confirm New Password" required><br>
        <button type="submit">Change Password</button>
    </form>
    <a th:href="@{/user/home}">Back to Home</a>

    <script>
        function validateForm() {
            var password = document.getElementById("password").value;
            var confirmPassword = document.getElementById("confirmPassword").value;
          
            if (password !== confirmPassword) {
              alert("Passwords do not match! Please try again.");
              return false; // Prevent form submission
            }
            // If passwords match, submit the form (no return statement needed)
          }
          
          document.getElementById("myForm").onsubmit = validateForm;
          
    </script>
</body>
</html>
